<div class="text-center justify-content-center">
  <div [formGroup]="form" class="questionBar container">
    <div class="row mb-2 justify-content-center">
      <div class="col-12-sm text-center">
        <h4>New Question</h4>
      </div>
    </div>
    <div class="row">
      <textarea [(ngModel)]="questionText"
        class="form-control input-form col-sm-12"
        placeholder="Ask a question!"
        formControlName="question"
        (keyup)="checkFormComplete()">
      </textarea>
      <div class="col-sm-12 line mt-2 mb-2"></div>
    </div>

    <div class="row mb-2" [ngClass]="{'hide-element': !topicMode}">
      <div class="input-group col-sm-12">
        <div class="input-group-prepend">
          <button class="iq-prepend dropdown-toggle" data-toggle="dropdown">{{ subjectDropdownText }}</button>
          <div class="dropdown-menu" style="border-radius: 9px;">
            <span class="dropdown-item" (click)="setSubjectDropdown(1)">Add Subject</span>
            <span class="dropdown-item" (click)="setSubjectDropdown(2)">Create Subject</span>
          </div>
        </div>
        <input #subjectField
          [(ngModel)]="topicText"
          class="form-control iq-form"
          formControlName="topic"
          placeholder="{{ subjectPlaceholder }}"
          (keyup)="subjectKeyup()"
          [typeahead]="subjectSearchResults"
          typeaheadOptionField="name"
          [typeaheadOptionsLimit]="5"
          [typeaheadMinLength]="3"
          (typeaheadOnSelect)="taSubjectSelected($event)">
      </div>
    </div>

    <div class="row mb-2" [ngClass]="{'hide-element': !sourceMode}">
      <div class="input-group col-sm-12">
        <div class="input-group-prepend">
          <button class="iq-prepend dropdown-toggle" data-toggle="dropdown">{{ sourceDropdownText }}</button>
          <div class="dropdown-menu" style="border-radius: 9px;">
            <span class="dropdown-item" (click)="setSourceDropdown(1)">Add Source</span>
            <span class="dropdown-item" (click)="setSourceDropdown(2)">Create Source</span>
          </div>
        </div>
        <input #sourceField
          [ngClass]="{'hide-element': !sourceMode}"
          [(ngModel)]="sourceText"
          class="form-control iq-form col-sm-12"
          formControlName="source"
          placeholder="{{ sourcePlaceholder }}"
          (keyup)="sourceKeyup()"
          [typeahead]="sourceSearchResults"
          typeaheadOptionField="name"
          [typeaheadOptionsLimit]="5"
          [typeaheadMinLength]="3"
          (typeaheadOnSelect)="taSourceSelected($event)">
      </div>
    </div>

    <div class="row justify-content-center mb-3">
      <div class="col-sm-4" (click)="topicModeToggle()">
        <div class="bubble" [ngClass]="{'bubble-selected': topicMode}">
          Add Subject
        </div>
      </div>
      <div class="col-sm-4" (click)="sourceModeToggle()">
        <div class="bubble" [ngClass]="{'bubble-selected': sourceMode}">
          Add Source
        </div>
      </div>
      <div class="col-sm-4">
        <div class="bubble">
          Add Tag
        </div>
      </div>
    </div>
  </div>

  <div style="position:relative;">
    <i class="fas fa-times fa-2x closeButton" (click)="close()"></i>
    <div>
      <button class="btn btn-secondary askButton" (click)="askQuestion()" [disabled]="!formComplete">
        Ask
      </button>
    </div>
  </div>
</div>
